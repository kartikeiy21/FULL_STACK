<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced SVG Drawing Tool</title>

<style>
:root {
    --primary: #6366f1;
    --bg: #f1f5f9;
    --card: rgba(255,255,255,0.85);
    --shadow: 0 10px 25px rgba(0,0,0,0.15);
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #c7d2fe, #e0e7ff);
    height: 100vh;
    display: flex;
    flex-direction: column;
}

.header {
    text-align: center;
    padding: 15px;
    font-size: 22px;
    font-weight: bold;
    color: #1e293b;
}

.toolbar {
    margin: 0 auto;
    background: var(--card);
    backdrop-filter: blur(10px);
    padding: 12px 18px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: var(--shadow);
}

select, button, input[type="color"] {
    padding: 6px 10px;
    border-radius: 8px;
    border: 1px solid #c7d2fe;
    font-size: 14px;
    cursor: pointer;
}

button {
    background: var(--primary);
    color: white;
    border: none;
}

button:hover {
    opacity: 0.9;
}

.canvas-container {
    flex: 1;
    margin: 20px;
    background: white;
    border-radius: 18px;
    box-shadow: var(--shadow);
    overflow: hidden;
}

svg {
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, #ffffff, #f8fafc);
    cursor: crosshair;
}
</style>
</head>

<body>

<div class="header">ðŸŽ¨ SVG Drawing Tool (Drag to Resize)</div>

<div class="toolbar">
    <label>Color</label>
    <input type="color" id="colorPicker" value="#000000">

    <label>Shape</label>
    <select id="shape">
        <option value="circle">Circle</option>
        <option value="rect">Rectangle</option>
    </select>

    <button onclick="undo()">Undo</button>
</div>

<div class="canvas-container">
    <svg id="canvas"></svg>
</div>

<script>
const svg = document.getElementById("canvas");
const colorPicker = document.getElementById("colorPicker");
const shapeSelector = document.getElementById("shape");

let shapes = [];
let currentShape = null;
let startX = 0, startY = 0;
let isDrawing = false;

// Mouse down â†’ start drawing
svg.addEventListener("mousedown", (e) => {
    isDrawing = true;
    startX = e.offsetX;
    startY = e.offsetY;

    const color = colorPicker.value;
    const type = shapeSelector.value;

    if (type === "circle") {
        currentShape = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        currentShape.setAttribute("cx", startX);
        currentShape.setAttribute("cy", startY);
        currentShape.setAttribute("r", 1);
    } else {
        currentShape = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        currentShape.setAttribute("x", startX);
        currentShape.setAttribute("y", startY);
        currentShape.setAttribute("width", 1);
        currentShape.setAttribute("height", 1);
        currentShape.setAttribute("rx", 6);
    }

    currentShape.setAttribute("fill", color);
    svg.appendChild(currentShape);
});

// Mouse move â†’ resize shape
svg.addEventListener("mousemove", (e) => {
    if (!isDrawing || !currentShape) return;

    const currentX = e.offsetX;
    const currentY = e.offsetY;

    const dx = currentX - startX;
    const dy = currentY - startY;

    if (shapeSelector.value === "circle") {
        const radius = Math.sqrt(dx * dx + dy * dy);
        currentShape.setAttribute("r", radius);
    } else {
        currentShape.setAttribute("width", Math.abs(dx));
        currentShape.setAttribute("height", Math.abs(dy));
        currentShape.setAttribute("x", Math.min(startX, currentX));
        currentShape.setAttribute("y", Math.min(startY, currentY));
    }
});

// Mouse up â†’ finalize shape
svg.addEventListener("mouseup", () => {
    if (currentShape) {
        shapes.push(currentShape);
    }
    isDrawing = false;
    currentShape = null;
});

// Undo
function undo() {
    const last = shapes.pop();
    if (last) svg.removeChild(last);
}
</script>

</body>
</html>